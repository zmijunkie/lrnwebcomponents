!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("lit"),require("@lrnwebcomponents/simple-colors/simple-colors.js"),require("@lrnwebcomponents/responsive-utility/responsive-utility.js"),require("@lrnwebcomponents/utils/utils.js")):"function"==typeof define&&define.amd?define(["exports","lit","@lrnwebcomponents/simple-colors/simple-colors.js","@lrnwebcomponents/responsive-utility/responsive-utility.js","@lrnwebcomponents/utils/utils.js"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).LrndesignTimeline={},e.lit,e.simpleColors_js,null,e.utils_js)}(this,(function(e,n,t,i,r){"use strict";function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function d(e,n){return d=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},d(e,n)}function p(e,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,i=c(e);if(n){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return p(this,t)}}function h(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=c(e)););return e}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,n,t){var i=h(e,n);if(i){var r=Object.getOwnPropertyDescriptor(i,n);return r.get?r.get.call(arguments.length<3?e:t):r.value}},m.apply(this,arguments)}function f(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function g(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return v(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return v(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}var b,y,x,k,w=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&d(e,n)}(p,e);var t,i,o,a=u(p);function p(){var e;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,p),(e=a.call(this)).events=[],e.timelineSize="xs",e}return t=p,o=[{key:"styles",get:function(){return[].concat(g(m(c(p),"styles",this)),[n.css(k||(k=f(['\n:host {\n  font-size: 14px;\n  font-weight: 100;\n  line-height: 160%;\n  display: block;\n  --lrndesign-timeline-color: var(--simple-colors-default-theme-grey-8, #444);\n  --lrndesign-timeline-color-print: #000;\n  --lrndesign-timeline-background: #f4f4f4;\n  --lrndesign-timeline-background-print: #fff;\n  --lrndesign-timeline-border: var(--simple-colors-default-theme-grey-5, #bbb);\n  --lrndesign-timeline-border-print: var(--simple-colors-fixed-theme-grey-5, #bbb);\n  --lrndesign-timeline-accent: #000;\n  --lrndesign-timeline-accent-background: #fff;\n  --lrndesign-timeline-accent-border: var(--simple-colors-default-theme-accent-8, #444);\n  --lrndesign-timeline-header: var(--simple-colors-default-theme-accent-1, #fff);\n  --lrndesign-timeline-header-accent: var(--simple-colors-default-theme-accent-8, #444);\n  --lrndesign-timeline-accent-print: var(--simple-colors-fixed-theme-accent-8, #444);\n}\n\n:host([dark]){\n  --lrndesign-timeline-background: #1b1b1b;\n}\n\n:host([hidden]) {\n  display: none;\n}\n\n::slotted(section) {\n  display: none;\n}\n\n#timeline {\n  display: block;\n  border-radius: 3px;\n  border: 1px solid var(--lrndesign-timeline-border-print);\n  border-left: 3px solid var(--lrndesign-timeline-accent-print);\n  background-color: var(--lrndesign-timeline-background-print);\n  color: var(--lrndesign-timeline-color-print);\n}\n\n#events {\n  padding: 0;\n  width: 100%;\n  min-height: 300px;\n}\n\n.heading {\n  margin: 0;\n  color: var(--lrndesign-timeline-accent-print);\n}\n\n.heading h2 {\n  font-size: 24px;\n  font-weight: 300;\n}\n\n.heading h2,\n.details,\n.media-outer > div {\n  padding: 0 40px;\n}\n\n.details {\n  margin: 15px 0; \n}\n\n.media-outer > div { \n  opacity: 1;\n  transition: opacity 0.5s;\n}\n\n.media-outer > div, \n.media-outer > div * { \n  margin: 0 auto;\n  max-width: 100%;\n  max-height: 260px;\n}\n@media screen {\n  #timeline {\n    color: var(--lrndesign-timeline-color);\n    background-color: var(--lrndesign-accent-background);\n    border: 1px solid var(--lrndesign-timeline-border);\n    border-left: 3px solid var(--lrndesign-timeline-accent-border);\n  }\n\n  :host([dark]) #timeline {\n    background-color: var(--lrndesign-timeline-background);\n  }\n\n  h2 {\n    color: var(--lrndesign-timeline-header-accent);\n  }\n\n  :host(:not([timeline-size="xs"])) #timeline {\n    background-color: var(--lrndesign-timeline-background);\n  }\n\n  :host(:not([timeline-size="xs"])) h2 {\n    color: var(--lrndesign-timeline-header-accent);\n  }\n\n  :host(:not([timeline-size="xs"])) #events {\n    height: 300px;\n    position: relative;\n    overflow-y: scroll;\n  }\n\n  :host(:not([timeline-size="xs"])) .event {\n    position: static;\n    top: 0;\n  }\n\n  :host(:not([timeline-size="xs"])) .event-overview {\n    padding: 0;\n    position: sticky;\n    top: 0;\n  }\n\n  :host(:not([timeline-size="xs"])) .heading {\n    position: absolute;\n    top: 0;\n    padding: 10px 0;\n    overflow: hidden;\n    background-color: transparent;\n    width: calc(55% + 30px);\n  }\n\n  :host(:not([timeline-size="xs"])) .event[has-media][selected] .heading {\n    z-index: 2;\n  }\n\n  :host(:not([timeline-size="xs"])) .event[has-media] .heading:after {\n    content: \' \';\n    z-index: 200;\n    position: absolute;\n    top: 42px;\n    right: 30px;\n    width: 0; \n    padding: 0; \n    border-top: 0px solid transparent;\n    border-bottom: 0px solid transparent;\n    border-left: 0px solid transparent;\n    transition: all 0.3s;\n    transition-delay: 0.2s;\n  }\n\n  :host(:not([timeline-size="xs"])) .event[has-media][selected] .heading:after {\n    top: 7px;\n    right: 0px;\n    border-top: 35px solid transparent;\n    border-bottom: 35px solid transparent; \n    border-left: 35px solid var(--lrndesign-timeline-header-accent);\n  }\n\n  :host(:not([timeline-size="xs"])) .heading h2 {\n    margin: 7px 48px 0 20px;\n    padding: 0 20px;\n    line-height: 50px;\n    height: 50px;\n    background-color: var(--lrndesign-timeline-background);\n    color: var(--lrndesign-timeline-header-accent);\n  }\n\n  :host(:not([timeline-size="xs"])) .event[selected] .heading h2 {\n    background-color: var(--lrndesign-timeline-header-accent);\n    color: var(--lrndesign-timeline-header);\n  }\n\n  :host(:not([timeline-size="xs"])) .event[has-media] .heading h2:after {\n    content: \'\';\n    position: absolute;\n    left: calc(100% - 48px);\n    top: 17px;\n    height: 50px;\n    opacity: 0;\n    width: 0px;\n    transition: opacity 0.3s;\n    background-color: var(--lrndesign-timeline-background);\n  }\n\n  :host(:not([timeline-size="xs"])) .event[has-media][selected] .heading h2:after {\n    width: 13px;\n    opacity: 1;\n    background-color: var(--lrndesign-timeline-header-accent);\n  }\n\n  :host(:not([timeline-size="xs"])) .media-outer {\n    display: flex;\n    align-items: center;\n    position: absolute;\n    right: 0;\n    width: 45%;\n    height: 300px;\n  }\n\n  :host(:not([timeline-size="xs"])) .media-outer > div {\n    display: flex;\n    padding: 20px 20px 20px 50px;\n    opacity: 0;\n    transition: opacity 0.3s delay 0.3s;\n  }\n\n  :host(:not([timeline-size="xs"])) .event[selected] .media-outer > div {\n    opacity: 1;\n    transition-delay: 0s;\n  }\n\n  :host(:not([timeline-size="xs"])) .details {\n    padding: 67px 20px 20px;\n    margin: 0 20px;\n    width: calc(55% - 80px);\n    color: var(--lrndesign-timeline-color);\n    background-color: var(--lrndesign-timeline-background);\n    border: 1px solid var(--lrndesign-timeline-background);\n    border-radius: 3px;\n    transition: all 0.5s;\n  }\n\n  :host(:not([timeline-size="xs"])) .event:last-of-type .details {\n    min-height: 180px;\n  }\n\n  :host(:not([timeline-size="xs"])) .event[selected] .details {\n    color: var(--lrndesign-timeline-accent);\n    background-color: var(--lrndesign-timeline-accent-background);\n    border: 1px solid var(--lrndesign-timeline-border);\n    box-shadow: 0 2px 2px var(--lrndesign-timeline-border);\n  }\n\n  :host(:not([timeline-size="xs"])) .event:first-of-type[selected] .details {\n    border-top: 1px solid var(--lrndesign-timeline-background);\n  }\n\n  :host(:not([timeline-size="xs"])) .event:last-of-type[selected] .details {\n    border-bottom: 1px solid var(--lrndesign-timeline-background);\n  }\n}\n      '])))])}},{key:"haxProperties",get:function(){return{canScale:!1,canPosition:!1,canEditSource:!0,gizmo:{title:"Timeline",description:"A timeline of events with images and text",icon:"hax:timeline",color:"indigo",groups:["Content","Instructional","Media","Image"],handles:[{type:"image",source:"image"}],meta:{author:"LRNWebComponents"}},settings:{configure:[{property:"timelineTitle",title:"Timeline Title",description:"A title for the timeline.",inputMethod:"textfield"},{property:"accentColor",title:"Accent Color",description:"An optional accent color.",inputMethod:"colorpicker"},{property:"dark",title:"Dark Theme",description:"Enable Dark Theme",inputMethod:"boolean"},{slot:"",title:"Timeline Description",description:"Optional text describing the timeline.",inputMethod:"textfield"},{property:"events",title:"Timeline Events",description:"The events in the timeline",inputMethod:"array",itemLabel:"heading",properties:[{property:"heading",title:"Event Heading",description:"The heading for the event.",inputMethod:"textfield"},{property:"details",title:"Event Details",description:"The body text with details for the event.",inputMethod:"textfield"},{property:"imagesrc",title:"Event Image",description:"The path of the image.",inputMethod:"haxupload"},{property:"imagealt",title:"Event Image Alt Text",description:"The alt text of the image (for accessibility).",inputMethod:"alt"}]}],advanced:[]},saveOptions:{unsetAttributes:["colors"]}}}},{key:"properties",get:function(){return l(l({},m(c(p),"properties",this)),{},{events:{type:Array},timelineSize:{type:String,reflect:!0,attribute:"timeline-size",value:"xs",timelineTitle:{type:String,reflect:!0,attribute:"timeline-title"},title:{type:String,attribute:"title"}}})}},{key:"tag",get:function(){return"lrndesign-timeline"}}],(i=[{key:"render",value:function(){var e=this;return n.html(b||(b=f(['\n\n<article>\n  <h1 id="title">','</h1>\n  <slot></slot>\n  <div id="timeline">\n      <div id="events" @scroll="','">\n        ',"\n    </div>\n  </div>\n</article>"])),this.timelineTitle,this._checkScroll,this.eventsList.map((function(t,i){return n.html(y||(y=f(['\n          <section class="event" ?has-media="','" tabindex="0" @focus="','">\n            <div class="event-overview">\n              <div class="heading"><h2>','</h2></div>\n              <div class="media-outer">\n                ','\n              </div>\n            </div>\n            <div class="details">',"</div>\n          </section>\n        "])),t.imagesrc&&""!==t.imagesrc,e._setScroll,t.heading,t.imagesrc&&""!==t.imagesrc?n.html(x||(x=f(['\n                    <div>\n                      <div><img alt="','" src="','"/></div>\n                    </div>\n                '])),t.imagealt,t.imagesrc):"",t.details)})))}},{key:"connectedCallback",value:function(){m(c(p.prototype),"connectedCallback",this).call(this),window.ResponsiveUtility.requestAvailability(),window.dispatchEvent(new CustomEvent("responsive-element",{detail:{element:this,attribute:"timeline-size",relativeToParent:!0,sm:600,md:900,lg:1200,xl:1600}})),this.updateTimeline(),this.observer.observe(this,{childList:!0,subtree:!1})}},{key:"disconnectedCallback",value:function(){this.observer&&this.observer.disconnect&&this.observer.disconnect(),m(c(p.prototype),"disconnectedCallback",this)&&m(c(p.prototype),"disconnectedCallback",this).call(this)}},{key:"updated",value:function(e){var n=this;m(c(p.prototype),"updated",this).call(this,e),e.forEach((function(e,t){"timelineTitle"===t&&n.title&&!n.timelineTitle&&(n.timelineTitle=n.title)})),this.updateTimeline()}},{key:"eventsElement",get:function(){return!(!this.shadowRoot||!this.shadowRoot.querySelector("#events"))&&this.shadowRoot.querySelector("#events")}},{key:"eventsList",get:function(){return("string"==typeof this.events?JSON.parse(this.events):this.events)||[]}},{key:"observer",get:function(){var e=this;return new MutationObserver((function(){return e.updateTimeline()}))}},{key:"_setScroll",value:function(e){var n=r.normalizeEventPath(e)[0];n.parentNode.scroll({top:n.offsetTop,left:0,behavior:"smooth"})}},{key:"_checkScroll",value:function(e){if(this.shadowRoot){var n=this.shadowRoot.querySelectorAll(".event")||[];n.forEach((function(e){var t=e.offsetTop,i=n[0].offsetTop+50+e.parentNode.scrollTop,r=e.offsetTop+e.offsetHeight;i>t&&i<r?e.setAttribute("selected",!0):e.removeAttribute("selected")}))}}},{key:"updateTimeline",value:function(){var e=this,n=document.querySelectorAll("section")||[];this.eventsList.length<1&&n.length>0&&this.eventsElement&&(this.eventsElement.innerHTML="",n.forEach((function(n){var t=n.cloneNode(!0),i=document.createElement("div"),r=i.cloneNode(),o=i.cloneNode(),l=i.cloneNode(),s=t.querySelector(".media")?t.querySelector(".media"):void 0,a=t.querySelector("h1,h2,h3,h4,h5,h6")?t.querySelector("h1,h2,h3,h4,h5,h6"):void 0;if(r.classList.add("event-overview"),a){var c=document.createElement("h2");l.appendChild(c),l.classList.add("heading"),c.innerHTML=a.innerHTML,a.remove()}if(r.appendChild(l),s){var d=i.cloneNode(),p=i.cloneNode();d.appendChild(p),i.appendChild(d),p.appendChild(s.cloneNode(!0)),s.remove(),t.setAttribute("has-media",!0)}i.classList.add("media-outer"),r.appendChild(i),Object.keys(t.children||[]).forEach((function(e){return o.append(t.children[e])})),o.classList.add("details"),t.classList.add("event"),t.appendChild(r),t.appendChild(o),e.eventsElement.appendChild(t)}))),this._checkScroll()}}])&&s(t.prototype,i),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),p}(t.SimpleColors);customElements.define(w.tag,w),e.LrndesignTimeline=w,Object.defineProperty(e,"__esModule",{value:!0})}));
